<html xmlns:th="http://www.thymeleaf.org">
    <th:block th:fragment="login">
        <div class="modal fade login-register-form" role="dialog">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span class="fa fa-remove"></span>
                        </button>
                        <ul class="nav nav-tabs ">
                            <li class="active">
                                <a id="tabLogin" data-toggle="tab"
                                   href="#login-form">Đăng nhập
                                    <span class="fa fa-user"></span>
                                </a>
                            </li>
                            <!-- <li><a id="tabRegister" data-toggle="tab"
                                href="#registration-form"> Đăng kí <span class="fa fa-pencil"></span></a></li>  -->
                        </ul>
                    </div>
                    <div class="modal-body">
                        <div class="tab-content">
                            <div id="login-form" class="tab-pane fade in active">
                                <div class="alert alert-danger print-error-msg-login"
                                     style="display: none">
                                    <ul></ul>
                                </div>
                                <form th:action="@{/CameraGiamSat/loginIndex}" id="myFormLogin"
                                      method="POST" accept-charset="UTF-8">
                                    <input type="hidden" name="_token" value="">
                                    <div class="form-group">
                                        <label for="email">Email:</label>
                                        <input type="email"
                                               class="form-control" placeholder="Enter email" name="email">
                                    </div>
                                    <div class="form-group">
                                        <label for="pwd">Mật khẩu:</label>
                                        <input type="password"
                                               class="form-control" placeholder="Enter password"
                                               name="password">
                                    </div>

                                    <div class="form-group">
                                        <div class="checkbox">
                                            <label>Bạn chưa có tài khoản?</label>
                                            <a th:href="@{/CameraGiamSat/dangky}">Đăng ký ngay</a>
                                        </div>
                                    </div>
                                    <button type="submit" id="btnLogin" class="btn btn-default">Đăng
                                        nhập
                                    </button>
                                </form>
                            </div>
                            <div id="forgot-form" class="tab-pane fade in fade">
                                <div class="alert alert-danger print-error-msg-forgot"
                                     style="display: none">
                                    <ul></ul>
                                </div>
                                <form action="http://localhost/a/CameraGiamSat/password/email"
                                      id="forgot-form1" method="POST" accept-charset="UTF-8">
                                    <input type="hidden" name="_token"
                                           value="NDa43LO4JVjZUi6bCZBQq5EgU3iXCWXqfikH4tUZ">
                                    <div class="form-group">
                                        <label for="email">Email:</label>
                                        <input type="email"
                                               class="form-control" placeholder="Enter email" name="email">
                                    </div>
                                    <button type="submit" class="btn btn-default">Xác nhận</button>
                                </form>
                            </div>
                            <div id="registration-form" class="tab-pane fade">
                                <div class="alert alert-danger print-error-msg"
                                     style="display: none">
                                    <ul></ul>
                                </div>
                                <!--  -->
                                <form id="myForm" action="" method="post" accept-charset="UTF-8">
                                    <input type="hidden" name="_token"
                                           value="NDa43LO4JVjZUi6bCZBQq5EgU3iXCWXqfikH4tUZ">
                                    <div class="form-group">
                                        <label for="name">Tên bạn:</label>
                                        <input type="text"
                                               class="form-control" placeholder="Enter your name" name="name">
                                    </div>
                                    <div class="form-group">
                                        <label for="newemail">Email:</label>
                                        <input type="email"
                                               class="form-control" placeholder="Enter new email"
                                               name="email">
                                    </div>
                                    <div class="form-group">
                                        <label for="newpwd">Mật khẩu:</label>
                                        <input type="password"
                                               class="form-control" placeholder="New password"
                                               name="password">
                                    </div>
                                    <div class="form-group">
                                        <label for="newpwd">Nhập lại Mật khẩu:</label>
                                        <input
                                                type="password" class="form-control"
                                                placeholder="New password" name="passwordAgain">
                                    </div>
                                    <div class="form-group">
                                        <label for="newpwd">Số điện thoại:</label>
                                        <input type="text"
                                               class="form-control" placeholder="Số điện thoại"
                                               name="numberPhone">
                                    </div>
                                    <div class="form-group">
                                        <label for="newpwd">Địa chỉ:</label>
                                        <input type="text"
                                               class="form-control" placeholder="Địa chỉ" name="address">
                                    </div>

                                    <button type="submit" id="btnReg" class="btn btn-default">Đăng
                                        kí
                                    </button>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="wait"
             style="display: none; width: 69px; height: 89px; position: absolute; top: 20%; left: 50%; padding: 2px; z-index: 99999">
            <img th:src='@{/public/images/ui_images/ajax-loading.gif}' width="64"
                 height="64"/>
        </div>
        <style type="text/css">
            .modal-header {
                padding: 0;
            }

            .modal-header .close {
                padding: 10px 15px;
            }

            .modal-header ul {
                border: none;
            }

            .modal-header ul li {
                margin: 0;
            }

            .modal-header ul li a {
                border: none;
                border-radius: 0;
            }

            .modal-header ul li.active a {
                color: #e12f27;
            }

            .modal-header ul li a:hover {
                border: none;
            }

            .modal-header ul li a span {
                margin-left: 10px;
            }

            .modal-body .form-group {
                margin-bottom: 10px;
            }
        </style>


        <script>
            function printErrorMsg(msg, object) {
                alert("Có gì đó sai sai, xin thử lại!");
                object.find("ul").html('');
                object.css('display', 'block');

                object.find("ul").append('<li>' + msg + '</li>');

            }

            $(function () {

                $('#myFormLogin').on(
                    'submit',
                    function (e) {

                        e.preventDefault();

                        $.ajax({
                            type: 'post',
                            url: '/CameraGiamSat/loginIndex',
                            data: $('#myFormLogin').serialize(),
                            success: function (data) {
                                if (data.status == "success") {
                                    alert("Đăng nhập thành công!");
                                    location.reload();
                                    //	location.href = "/CameraGiamSat/index"
                                } else {

                                    printErrorMsg(data.messeges,
                                        $(".print-error-msg-login"));
                                }

                            }
                        });

                    });

            });
        </script>


        <style type="text/css">
            #wait.fixed {
                bottom: 0;
                right: 0;
                width: 100%;
                height: 9%;
                background-color: pink;
                text-align: center
            }
        </style>
    </th:block>